<!DOCTYPE html>
<html>
  <head>
      <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
      <meta 
          name="viewport" 
          content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

      <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
      <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
      <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  </head>

  <body style="margin : 0px; overflow: hidden;">
    <div id="scripts">
        <script src="./js/main.js"></script>
    </div>

    <!-- NOTE: Adjust 'patternRatio: ...;' (previously was 0.5 and made things worse) --> 
    <a-scene 
        embedded 
        arjs='trackingMethod: best; debugUIEnabled: false; sourceType: webcam;'
        renderer="logarithmicDepthBuffer: true;"
        vr-mode-ui="enabled: false"
        gesture-detector
        id="scene">
      
        <a-marker 
            id="barcode-marker" 
            type='pattern' 
            cursor="fuse: false; rayOrigin: mouse" 
            pmarkerhandler 
            emitevents="true" 
            reset="pattern" 
            smooth="true"
            smoothCount="0"
            smoothTolerance=".0001"
            smoothThreshold="5"
            raycaster="objects: .clickable"
            url='https://raw.githubusercontent.com/hophiphip/lok/master/data/patt/pattern-lok-marker.patt'>

            <a-box
                id="barcode-model"
                position='0 0.5 0' 
                class="clickable"
                scale="1 1 1"
                material='color: red;' 
                gesture-handler="minScale: 0.25; maxScale: 10"
                soundhandler>
            </a-box>

            <a-text 
                id="barcode-text" 
                value="Inital barcode"  
                color = "purple" 
                position = "1 -3 0" 
                rotation="270 0 0" 
                scale = "2 2 2">
            </a-text>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
